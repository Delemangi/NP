# Message System (60)

Да се имплементира систем за чување на пораки според определени теми (topics). За секоја порака во системот се чува:

- временски печат (timestamp), објект од класата `LocalDateTime`
- содржина на пораката `String`
- на која партиција треба да биде зачувана пораката (`Integer` којшто може да биде и null).
- клуч на поракта (`String`)

Системот за чување на овие пораки функционира на следниов начин:

- Пораките се чуваат во рамки на еден `Broker`. Во брокерот може да има повеќе теми (`topics`).
- Во секоја тема (`Topic`) има одреден број на партиции каде што се чуваат пораки. Пораките се чуваат сортирани според
  датумот на креирање. На секоја од партициите има исто ограничување за тоа кои пораки може да се чуваат и тоа:
    - може да се чуваат максимум `limit` пораки. Доколку пристигне порака кога капацитетот е исполнет, се бриши
      најстарата порака, а се додава новата.
    - не може да се чуваат пораки постари од `startDate`.
- На секој `Topic` може да му биде зголемен бројот на партиции, но не смее да биде намален!

За да се имплементира системот потребно е да ги напишете следните класи со соодветни функционалности:

За да се имплементира системот потребно е да ги напишете следните класи со соодветни функционалности:

- `Message`
    - да се чуваат во неа променливите специфицирани погоре.
    - да се имплементира toString() методот со default имплементацијата (внимавајте на имињата на променливите), но да
      се печатат само содржината на пораката и нејзиниот timestamp (видете во тест примерите).
- `Topic` - класа за чување на пораки по теми. За секој `Topic` се чува името на темата, како и колекција од сите пораки
  распределени по партиции. Оваа класа треба да ги има следните методи:
    - `Topic(String topicName, int partitionsCount)` конструктор
    - `void addMessage (Message message) throws PartitionDoesNotExistException` - метод за додавање на нова порака во
      оваа тема. Додавањето се прави во соодветна партиција која се чува како информација во пораката message. Доколку
      таму не е специфицирана, треба да се искористи методот `assignPartition` од класата `PartitionAssigner` која што е
      дадена во почетниот код. Доколку не постои партицијата која е наведена во пораката да се фрли исклучок од тип
      `PartitionDoesNotExistException`.
    - `void changeNumberOfPartitions (int newPartitionsNumber) throws UnsupportedOperationException` - метод за промена
      на бројот на партиции. Доколку се проба да се намали бројот на партиции да се фрли исклучок како во потписот на
      функцијата.
    - `String toString()` - метод којшто ќе дава toString репрезентација на topic-oт така што за него ќе се испечати
      неговото име i бројот на партиции во формат `Topic: %10s Partitions: %5d\n`, а потоа во нови редови сите пораки
      содржините на партициите. Партициите да се сортирани според нивниот реден број.
- `MessageBroker` - класа за чување на повеќе теми (објекти од класата Topics). Дополнително во оваа класа се чуваат и
  стартниот датум, како и максималниот капацитет на секоја партиција за сите теми во овој брокер. Да се имплементираат
  следните методи:
    - `MessageBroker(LocalDateTime minimumDate, Integer capacityPerTopic)` - конструктор
    - `void addTopic (String topic, int partitionsCount)` - метод за додавање на нов topic со одреден број на партиции
      во него. не смее да се додаде topic со исто име.
    - `void addMessage (String topic, Message message)` - метод за додавање на порака на определен topic.
    - `void changeTopicSettings (String topic, int partitionsCount)` - метод за промена на бројот на партиции на
      определен topic
    - `String toString()` - метод којшто ќе дава String нотација на брокерот. Најпрво ќе се испечати колку topic-и има,
      а потоа за сите topic-и ќе се даде нивната toString репрезентација. Topic-ите да се сортирани според нивното име.

Визуелизација на еден topic
